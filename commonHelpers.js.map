{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/icon-error.svg","../src/js/render-functions.js"],"sourcesContent":["import axios from 'axios';\n\n\n//Формування HTTP запита на сервер для отримання відповіді (проміса)\nasync function getImagesService(value, page, limit) {\n  \n  axios.defaults.baseURL = \"https://pixabay.com/api\";\n  const searchParams = new URLSearchParams({\n    key: \"42527705-4e95d3f46fcc8571248d3eb24\",\n    q: value,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: limit,\n  })\n\n  const response = await axios.get(`/?${searchParams}`);\n  return response\n}\n\n\n//Експорт функцій \nexport { getImagesService }","export default \"__VITE_ASSET__eb775c6f__\"","// Імпорт бібліотеки SimpleLightbox - відображення модалки фото\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n//Імпорт функцій з \"./pixabay-api\"\nimport { getImagesService } from \"./pixabay-api\";\n//Імпорт iziToast для відображення повідомлення\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconError from \"../img/icon-error.svg\";\n\n//Використання iziToast\nconst showErrorMessage = () => iziToast.error({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    iconUrl: iconError,\n    position: \"topRight\",\n    backgroundColor: \"#ef4040\",\n    theme: \"dark\",\n    transitionIn: \"fadeInRight\",\n})\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\n//Функція додавання та видалення класу \"is-hidden\" для видимості завантажувача\nconst showLoader = () => loader.classList.toggle(\"is-hidden\");\n\nform.addEventListener(\"submit\", getImagesFromPixabay);\n\nlet limit = 15;\nlet page = 1;\nlet currentInputSearch;\n\n//Функція до слухача події до кнопки - відправка запиту та відповідь\nfunction getImagesFromPixabay(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    const input = event.currentTarget.elements.image.value.trim();\n    const inputSearch = input.split(\" \").join(\"+\");\n    btnLoadMore.classList.add(\"is-hidden\")\n\n    if (input) {\n        showLoader();\n        getImagesService(inputSearch, page, limit)\n            .then(response => {\n                showLoader();\n                if (response.data.hits.length !== 0) {\n                    markup(response.data);\n                    btnLoadMore.classList.remove(\"is-hidden\");\n                    currentInputSearch = inputSearch;\n                    form.reset()\n                } else {\n                    showErrorMessage();\n                    btnLoadMore.classList.add(\"is-hidden\");\n                    }\n            })\n            .catch(error => {\n                console.log(error);\n                showLoader()\n                showErrorMessage();\n            })\n    } else {\n        showErrorMessage();\n        \n        }\n}\n\nbtnLoadMore.addEventListener(\"click\", loadMoreImages);\n\n//Функція до слухача події до кнопки - загрузка більше \nfunction loadMoreImages() {\n    showLoader();\n    page++\n    getImagesService(currentInputSearch, page, limit)\n        .then(response => { \n            // console.log(response)\n            if (response.data.totalHits < (limit * page)) {\n            showLoader();\n            btnLoadMore.classList.add(\"is-hidden\");\n            iziToast.info({\n            position: \"topRight\",\n                theme: \"dark\",\n            backgroundColor: \"#4e75ff\",\n            transitionIn: \"fadeInRight\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            })\n                \n            } else {\n            showLoader();\n            markup(response.data);\n            btnLoadMore.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n            });\n            // console.log(response)\n        }\n        })\n        .catch(() => {\n            showLoader();\n            btnLoadMore.classList.add(\"is-hidden\")})\n}\n\n//Вікористання бібліотеки SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: \"alt\", captionDelay: 250 } );\n\n//Додавання HTML коду списку галереї\nfunction markup(data) {\n//   console.log(data)\nlet galleryHTML = \"\";\ndata.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return galleryHTML += `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\"><img class=\"gallery-item-images\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n        <ul class=\"gallery-item-info\">\n            <li class=\"item-info\">\n                <p class=\"item-info-name\">Likes</p>\n                <p class=\"item-info-value\">${likes}</p>\n            </li>\n            <li class=\"item-info\">\n                <p class=\"item-info-name\">Views</p>\n                <p class=\"item-info-value\">${views}</p>\n            </li>\n            <li class=\"item-info\">\n                <p class=\"item-info-name\">Comments</p>\n                <p class=\"item-info-value\">${comments}</p>\n            </li>\n            <li class=\"item-info\">\n                <p class=\"item-info-name\">Downloads</p>\n                <p class=\"item-info-value\">${downloads}</p>\n            </li>\n            </ul>\n    </li>`\n    }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", galleryHTML);\n    //Оновлення метод refresh() для даних Ajax Calls або після DOM-маніпуляцій \n    lightbox.refresh();\n    //Стилі бібліотеки simplelightbox\n    lightbox.on('shown.simplelightbox', function () {\n    const overlay = document.querySelector(\".sl-overlay\");\n    const btnClose = document.querySelector(\".sl-close \");\n    const counter = document.querySelector(\".sl-counter\");\n    const btnArrow = document.querySelectorAll(\".sl-navigation button\");\n    const overlayImage = document.querySelector(\".sl-caption\");\n\n    overlay.style.backgroundColor = \"rgb(46, 47, 66)\";\n    btnClose.style.color = \"#ffffff\";\n    btnClose.style.fontSize = \"2rem\";\n    counter.style.color = \"#ffffff\";\n    btnArrow.forEach(item => item.style.color = \"#ffffff\");\n    overlayImage.style.backgroundColor = \"rgba(46, 47, 66, 0.80)\";\n    });\n}\n\n\n\n"],"names":["getImagesService","value","page","limit","axios","searchParams","iconError","showErrorMessage","iziToast","form","gallery","loader","btnLoadMore","showLoader","getImagesFromPixabay","currentInputSearch","event","input","inputSearch","response","markup","error","loadMoreImages","lightbox","SimpleLightbox","data","galleryHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","overlay","btnClose","counter","btnArrow","overlayImage","item"],"mappings":"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"}